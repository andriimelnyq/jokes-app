(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{102:function(e,t,n){},107:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(30),i=n.n(o),s=n(78),u=n(143),j=(n(88),n(50)),d=n(145),l=n(146),b=n(140),O=n(142),f=(n(94),j.b),p=j.c,x=n(7),k=n(27),h=n.n(k),v=n(14),m=n(42),y=n(38);!function(e){e.LOAD_JOKES="Unable to load jokes. Try again later!",e.LOAD_RANDOM_JOKE="Unable to load new joke. Try again later!",e.NONE=""}(r||(r={}));var g="https://official-joke-api.appspot.com",N=function(){return fetch("".concat(g,"/jokes/ten")).then((function(e){return e.json()}))},S=function(){return fetch("".concat(g,"/jokes/random")).then((function(e){return e.json()}))},_={jokes:[],loading:!1,error:r.NONE},C=function(){var e=localStorage.getItem("jokes");return e?JSON.parse(e):[]},E=Object(y.b)("jokes/fetch",function(){var e=Object(m.a)(h.a.mark((function e(t,n){var r,a,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,a=C(),e.next=4,N();case 4:if(c=e.sent,o=a.map((function(e){return e.id})),i=c.map((function(e){return e.id})),i.every((function(e){return!o.includes(e)}))){e.next=12;break}return e.next=11,r(E());case 11:return e.abrupt("return",[]);case 12:return e.abrupt("return",[].concat(Object(v.a)(a),Object(v.a)(c)).slice(0,10));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(y.b)("jokesMore/fetch",function(){var e=Object(m.a)(h.a.mark((function e(t,n){var r,a,c,o,i,s,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=n.dispatch,c=r(),o=c.jokes,e.next=4,N();case 4:if(i=e.sent,s=o.jokes.map((function(e){return e.id})),u=i.map((function(e){return e.id})),u.every((function(e){return!s.includes(e)}))){e.next=12;break}return e.next=11,a(w());case 11:return e.abrupt("return",[]);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),J=Object(y.b)("joke/fetch",function(){var e=Object(m.a)(h.a.mark((function e(t,n){var r,a,c,o,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.getState,a=n.dispatch,c=r(),o=c.jokes,e.next=4,S();case 4:if(i=e.sent,o.jokes.every((function(e){return e.id!==i.id}))){e.next=10;break}return e.next=9,a(J());case 9:return e.abrupt("return",[]);case 10:return e.abrupt("return",[i]);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),A=Object(y.c)({name:"jokes",initialState:_,reducers:{set:function(e,t){return Object(x.a)(Object(x.a)({},e),{},{jokes:t.payload})},setError:function(e,t){return Object(x.a)(Object(x.a)({},e),{},{error:t.payload})},delete:function(e,t){var n=C();return localStorage.setItem("jokes",JSON.stringify(n.filter((function(e){return e.id!==t.payload})))),Object(x.a)(Object(x.a)({},e),{},{jokes:e.jokes.filter((function(e){return e.id!==t.payload}))})}},extraReducers:function(e){e.addCase(E.pending,(function(e){return Object(x.a)(Object(x.a)({},e),{},{loading:!0})})),e.addCase(E.fulfilled,(function(e,t){return Object(x.a)(Object(x.a)({},e),{},{jokes:t.payload,loading:!1})})),e.addCase(E.rejected,(function(e){return Object(x.a)(Object(x.a)({},e),{},{error:r.LOAD_JOKES,loading:!1})})),e.addCase(w.pending,(function(e){return Object(x.a)(Object(x.a)({},e),{},{loading:!0})})),e.addCase(w.fulfilled,(function(e,t){return Object(x.a)(Object(x.a)({},e),{},{loading:!1,jokes:[].concat(Object(v.a)(e.jokes),Object(v.a)(t.payload))})})),e.addCase(w.rejected,(function(e){return Object(x.a)(Object(x.a)({},e),{},{error:r.LOAD_JOKES,loading:!1})})),e.addCase(J.pending,(function(e){return Object(x.a)(Object(x.a)({},e),{},{loading:!0})})),e.addCase(J.fulfilled,(function(e,t){var n=C();return localStorage.setItem("jokes",JSON.stringify([].concat(Object(v.a)(n),Object(v.a)(t.payload)))),Object(x.a)(Object(x.a)({},e),{},{loading:!1,jokes:[].concat(Object(v.a)(e.jokes),Object(v.a)(t.payload))})})),e.addCase(J.rejected,(function(e){return Object(x.a)(Object(x.a)({},e),{},{error:r.LOAD_RANDOM_JOKE,loading:!1})}))}}),D=A,L=A.actions,I=n(147),K=(n(98),n(1)),B=function(e){var t=e.card;return Object(K.jsx)("div",{className:t?"loader loader--card":"loader",children:Object(K.jsx)(I.a,{sx:{margin:"auto"}})})},M=n(15),F=n(148),R=n(149),z=n(139),T=n(76),U=n.n(T),H=(n(102),function(e){var t=e.joke,n=t.id,c=t.setup,o=t.punchline,i=t.type,s=Object(a.useState)(!1),u=Object(M.a)(s,2),j=u[0],b=u[1],O=f(),x=p((function(e){return e.jokes})).jokes,k=function(){var e=Object(m.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,S();case 4:if(t=e.sent,!!x.some((function(e){return e.id===t.id}))){e.next=12;break}a=x.map((function(e){return e.id===n?t:e})),O(L.set(a)),localStorage.setItem("jokes",JSON.stringify(C().map((function(e){return e.id===n?t:e})))),e.next=14;break;case 12:return e.next=14,k();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),O(L.setError(r.LOAD_RANDOM_JOKE));case 19:return e.prev=19,b(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(){return e.apply(this,arguments)}}();return Object(K.jsxs)(F.a,{className:"joke-card",children:[j&&Object(K.jsx)(B,{card:!0}),Object(K.jsxs)("div",{className:"joke-card__content",children:[Object(K.jsxs)("div",{className:"joke-card__row",children:[Object(K.jsxs)(d.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["Type:"," ",i]}),Object(K.jsxs)(d.a,{sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:["ID"," ","#",t.id]})]}),Object(K.jsxs)("div",{className:"joke-card__main",children:[Object(K.jsx)(d.a,{variant:"body2",color:"text.secondary",children:"Setup:"}),Object(K.jsx)(d.a,{variant:"body2",sx:{mb:1},children:c}),Object(K.jsx)(d.a,{variant:"body2",color:"text.secondary",children:"Punchline:"}),Object(K.jsx)(d.a,{variant:"body2",children:o})]}),Object(K.jsxs)("div",{className:"joke-card__row--transparent",children:[Object(K.jsx)(R.a,{onClick:function(){return O(L.delete(n))},children:Object(K.jsx)(z.a,{titleAccess:"delete"})}),Object(K.jsx)(l.a,{variant:"text",onClick:function(){return O(J())},children:"Add"}),Object(K.jsx)(R.a,{onClick:k,children:Object(K.jsx)(U.a,{titleAccess:"update"})})]})]})]})}),P=(n(107),function(){var e=p((function(e){return e.jokes})).jokes;return e.length>0?Object(K.jsx)("div",{className:"joke-list",children:e.map((function(e){return Object(K.jsx)(H,{joke:e},e.setup)}))}):Object(K.jsx)(d.a,{variant:"h4",children:"No jokes yet"})}),q=function(){var e=p((function(e){return e.jokes})),t=e.loading,n=e.error,c=f();return Object(a.useEffect)((function(){c(E())}),[]),Object(K.jsxs)(K.Fragment,{children:[t&&Object(K.jsx)(B,{}),Object(K.jsxs)("div",{className:"app",children:[Object(K.jsx)(d.a,{variant:"h2",align:"center",color:"primary",children:"Jokes"}),Object(K.jsx)(P,{}),Object(K.jsx)(l.a,{variant:"contained",onClick:function(){return c(w())},children:"Load more"})]}),Object(K.jsx)(b.a,{open:n!==r.NONE,autoHideDuration:5e3,onClose:function(){return c(L.setError(r.NONE))},anchorOrigin:{vertical:"top",horizontal:"right"},children:Object(K.jsx)(O.a,{severity:"error",children:n})})]})},G=Object(y.a)({reducer:{jokes:D.reducer}}),Q=Object(s.a)({palette:{primary:{main:"#FF4747"},secondary:{main:"#FC8B8B"}}});i.a.render(Object(K.jsx)(j.a,{store:G,children:Object(K.jsx)(c.a.StrictMode,{children:Object(K.jsx)(u.a,{theme:Q,children:Object(K.jsx)(q,{})})})}),document.getElementById("root"))},88:function(e,t,n){},94:function(e,t,n){},98:function(e,t,n){}},[[109,1,2]]]);
//# sourceMappingURL=main.bd9f2617.chunk.js.map